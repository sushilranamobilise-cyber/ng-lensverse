<app-service-banners
  [title]="subData?.title || serviceData?.title || 'Sub Service'"
  [paragraph]="subData?.title || serviceData?.title || 'Sub Service'">
</app-service-banners>

<div class="service__details p_relative">
  <div class="auto-container">
    <div class="row mb-4">
      <!-- Sidebar -->
      <!-- <div class="col-xl-4 col-lg-6 col-md-12">
        <div class="service__details__left">
          <div class="sidebar__widget">
            <div class="all__service">
              <h4>All Services</h4>
            </div>
            <ul class="service__details__1__cat">
              <li *ngFor="let s of allServices">
                <a [routerLink]="['/home','services', s.id]" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
                  {{ s.title }} <i class="icon-02"></i>
                </a>
              </li>
            </ul>
          </div>

          <div class="sidebar__widget_network" style="background-image: url(assets/images/resource/base.png);">
            <h3>Contact Us For Any Require</h3>
            <div class="services__icon"><i class="icon-19"></i></div>
            <p>Need help? Call us:</p>
            <a href="tel:+918468895724"><h4>+91 84688 95724</h4></a>
          </div>
        </div>
      </div> -->

      <!-- Content -->
      <div class="col-xl-12 col-lg-12 col-md-12">
        <h2 class="mb-4">{{ subData?.title || serviceData?.title }}</h2>

        <div class="service__right">
          <!-- Hero -->
          <section class="subservice-hero py-4">
            <div class="container">
              <div class="row">
                <div class="col-lg-6">
                  <h4 class="display-5 font-weight-bold mb-2">{{ subData?.title || serviceData?.title }}</h4>
                  <p class="text-muted lead mb-3">{{ subData?.description || serviceData?.description }}</p>

                  <div class="mb-3 d-flex gap-2">
                    <button type="button" class="btn btn-outline-secondary mr-2" (click)="openModal(0)" [attr.aria-label]="'Open image 1'">
                      <i class="icon-06"></i>
                    </button>
                    <a class="theme-btn theme-btn-one" routerLink="/home/contact">Request Quote</a>
                  </div>

                  <ul class="list-unstyled text-small text-muted">
                    <li><strong>Category:</strong> {{ serviceData?.title }}</li>
                    <li><strong>Typical deliverables:</strong> Stills, Aerials, Short Video</li>
                    <li><strong>Turnaround:</strong> 3–7 business days</li>
                  </ul>
                </div>

                <div class="col-lg-6 text-center">
                  <img [src]="subData?.image || serviceData?.image || 'https://via.placeholder.com/800x450'"
                       class="img-fluid rounded shadow-sm"
                       [attr.alt]="getTitle()">
                </div>
              </div>
            </div>
          </section>

          <!-- Main content -->
          <section class="subservice-content py-4">
            <div class="container">
              <div class="row">
                <div class="col-lg-8">
                  <h3 class="mb-3">Overview</h3>
                  <p class="text-justify">{{ subData?.longDescription || subData?.description || serviceData?.description }}</p>

                  <h5 class="mt-4">What we include</h5>
                  <div class="row">
                    <div class="col-md-6 mb-2" *ngFor="let feat of (subData?.features || defaultFeatures)">
                      <div class="d-flex align-items-start">
                        <div class="mr-3">
                          <div class="feature-icon theme-btn-one text-white rounded-circle d-flex align-items-center justify-content-center" style="width:44px;height:44px;">
                            <i class="icon-17"></i>
                          </div>
                        </div>
                        <div>
                          <strong>{{ feat.title }}</strong>
                          <div class="text-muted small">{{ feat.subtitle }}</div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Gallery (opens modal) -->
                  <h5 class="mt-4">Gallery</h5>
                  <div class="row">
                    <div class="col-6 col-md-4 mb-3" *ngFor="let img of getGallery(); let i = index">
                      <button type="button"
                              class="btn p-0 border-0 w-100"
                              (click)="openModal(i)"
                              [attr.aria-label]="'Open image ' + (i + 1)">
                        <img [src]="img" class="img-fluid rounded" [attr.alt]="'gallery image ' + (i + 1)">
                      </button>
                    </div>
                  </div>

                  <h5 class="mt-4">Featured case study</h5>
                  <div class="card mb-4">
                    <div class="row no-gutters">
                      <div class="col-md-5">
                        <img src="https://fastly.picsum.photos/id/2/5000/3333.jpg?hmac=_KDkqQVttXw_nM-RyJfLImIbafFrqLsuGO5YuHqD-qQ"
                             class="img-fluid rounded-left" alt="case study">
                      </div>
                      <div class="col-md-7">
                        <div class="card-body">
                          <h6 class="card-title">Oakwood Residences — Visual Refresh</h6>
                          <p class="card-text text-muted">A 2-week shoot + edit package that increased listing leads by 180% across targeted channels.</p>
                          <a class="btn btn-sm btn-outline-light" href="#">Read case study</a>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>

                <!-- Sidebar -->
                <aside class="col-lg-4">
                  <div class="card mb-3">
                    <div class="card-body">
                      <h6 class="card-title">Quick Quote</h6>
                      <p class="text-muted small">Tell us a few details and we’ll share an estimate within one business day.</p>

                      <ul class="list-unstyled mb-3">
                        <li><strong>Starter:</strong> 10 photos + basic edit</li>
                        <li><strong>Pro:</strong> 25 photos + drone + short video</li>
                        <li><strong>Enterprise:</strong> Full production + walkthrough</li>
                      </ul>

                      <a class="theme-btn theme-btn-one" routerLink="/home/contact">Get a quote</a>
                    </div>
                  </div>

                  <div class="card mb-3">
                    <div class="card-body">
                      <h6 class="card-title">Technical specs</h6>
                      <ul class="list-unstyled text-muted small">
                        <li>4K Video capture</li>
                        <li>HDR Photo processing</li>
                        <li>Drone (where permitted)</li>
                      </ul>
                      <a class="btn btn-sm btn-outline-secondary" href="#">Download tech sheet (PDF)</a>
                    </div>
                  </div>
                </aside>

              </div>
            </div>
          </section>

        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal overlay -->
<div *ngIf="isModalOpen" class="gallery-modal" (click)="onOverlayClick($event)" role="dialog" aria-modal="true">
  <div class="gallery-content" (click)="$event.stopPropagation()">
    <button class="close-btn" (click)="closeModal()" aria-label="Close">&times;</button>

    <div class="gallery-image-container">
      <button class="nav-btn prev" (click)="prevImage()" aria-label="Previous image">‹</button>
      <img [src]="currentModalImage" class="gallery-image" [attr.alt]="getTitle()">
      <button class="nav-btn next" (click)="nextImage()" aria-label="Next image">›</button>
    </div>

    <div class="text-center mt-2 text-white small">
      {{ modalIndex + 1 }} / {{ getGallery().length }}
    </div>

    <div class="thumbs mt-3 d-flex justify-content-center flex-wrap">
      <button *ngFor="let t of getGallery(); let j = index"
              class="thumb-btn"
              [class.active]="j === modalIndex"
              (click)="viewAt(j)"
              [attr.aria-label]="'View image ' + (j + 1)">
        <img [src]="t" class="thumb-img" [attr.alt]="'thumb ' + (j + 1)">
      </button>
    </div>
  </div>
</div>
